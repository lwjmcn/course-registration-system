# Course Registration System

## ê°œë°œí™˜ê²½

Window10 / IntelliJ IDEA / MySQL

## ì‹¤í–‰í™˜ê²½

IntelliJ IDEA 2022.2

MySQL 8.0

Tomcat 9.0.65

SDK Amazon Corretto version 15.0.2

Connector mysql-connector-java-8.0.20.jar

## ê°œìš”

- Front-End: ë°ì´í„° ë² ì´ìŠ¤ì— ì—°ê²° ê°€ëŠ¥í•œ ì‚¬ìš©ì ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì‘
- Back-End: ì£¼ì–´ì§„ ìˆ˜ê°• ì‹ ì²­ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„° ë² ì´ìŠ¤ë¥¼ ìƒì„±

## ê³¼ì œ ëª…ì„¸

### All

- ì§€ì†ì ì¸ íŠ¸ëœì­ì…˜ì´ ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤
- ìˆ˜ê°• í¸ëŒ ê¸°ëŠ¥
    - ì§€ì • ê²€ìƒ‰: ìˆ˜ì—…ë²ˆí˜¸(ì™„ì „ì¼ì¹˜), í•™ìˆ˜ë²ˆí˜¸(ì™„ì „ì¼ì¹˜), êµê³¼ëª©ëª…(í‚¤ì›Œë“œí¬í•¨)
    - ì‹ ì²­ë²„íŠ¼, ìˆ˜ì—…ë²ˆí˜¸, í•™ìˆ˜ë²ˆí˜¸, êµê³¼ëª©ëª…, êµê°•ì‚¬ì´ë¦„, ìˆ˜ì—…ì‹œê°„, ì‹ ì²­ì¸ì›/ìˆ˜ê°•ì •ì›, ê°•ì˜ì‹¤(ê±´ë¬¼+í˜¸ìˆ˜) í‘œì‹œ

### Admin

- ê´€ë¦¬ì ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- í•™ìƒ ì •ë³´ ì¡°íšŒ ë° ë³€ê²½
    - ê¸ˆí•™ê¸° ì‹œê°„í‘œ ì¡°íšŒ, ì„±ì  ì¡°íšŒ, ì§€ë„êµìˆ˜ ì¡°íšŒ, ì¬í•™/íœ´í•™/ìí‡´ ë“± ìƒíƒœ ë³€ê²½
- ê³¼ëª© ìƒíƒœ ì¡°íšŒ ë° ë³€ê²½
    - ê³¼ëª© ì¦ì› ê°€ëŠ¥, ìˆ˜ê°• í—ˆìš© ë°˜ì˜
- ê³¼ëª© ì„¤ê°• ë° íê°•
    - (ìˆ˜ê°• ì •ì› > ê°•ì˜ì‹¤ ìˆ˜ìš© ì¸ì›)ì˜ ê²½ìš° ê³¼ëª© ê°œì„¤ ë¶ˆê°€
    - íê°• ì‹œ í•´ë‹¹ ìˆ˜ì—… ì‹ ì²­/í¬ë§í•œ í•™ìƒë“¤ì˜ ëª©ë¡ì—ì„œ ê³¼ëª© ë‚´ì—­ ì‚­ì œ
    - í† ìš”ì¼, í‰ì¼ 18ì‹œ ì´í›„ ìˆ˜ì—…ì€ E-ëŸ¬ë‹ ê°•ì˜ë¡œ ë¶„ë¥˜
    - ì¼ìš”ì¼ ê³¼ëª© ê°œì„¤ ë¶ˆê°€ëŠ¥
- OLAP í†µê³„ ì¡°íšŒ
    - (í‰ì  í‰ê·  - íŠ¹ì • ê³¼ëª© í•™ì )ì´ ê°€ì¥ í° Top10 ê³¼ëª© ì¶”ì¶œ

### User

- ì‚¬ìš©ì ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- ìˆ˜ê°• ì‹ ì²­ ë° ì·¨ì†Œ
    - ì¬ìˆ˜ê°• ì—¬ë¶€ í‘œì‹œ
    - ìˆ˜ê°• ì‹ ì²­ ì´ì „ í¬ë§ ìˆ˜ì—… ì‹ ì²­ ê°€ëŠ¥
    - ìˆ˜ê°• ì‹ ì²­ ë‚´ì—­ì˜ ì‚½ì…, ì‚­ì œ, ê°±ì‹ 
        - ì´ì „ ì„±ì ì´ B0 ì´ìƒì¼ ê²½ìš° ì‹ ì²­ ë¶ˆê°€
        - ì •ì›ì´ ë‹¤ ì°¼ì„ ê²½ìš° í•´ë‹¹ ê³¼ëª© ì‹ ì²­ ë¶ˆê°€
        - ë™ì¼ ì‹œê°„ëŒ€ 2ê°œ ì´ìƒì˜ ê³¼ëª© ì‹ ì²­ ë¶ˆê°€
        - ìµœëŒ€ í•™ì  18í•™ì  ì œí•œ, ì´ˆê³¼ ì‹ ì²­ ë¶ˆê°€
- ìˆ˜ì—… ì‹œê°„í‘œ ìƒì„±
    - E-ëŸ¬ë‹ ê°•ì˜ëŠ” ì‹ ì²­ë‚´ì—­/í¬ë§ë‚´ì—­ì—ëŠ” í‘œì‹œë˜ì§€ë§Œ, ì‹œê°„í‘œì—ëŠ” í‘œì‹œë˜ì§€ ì•ŠìŒ

## ë””ìì¸ ê³„íš

### DataBase Schema

MySQL workbench EER Diagram í™œìš©

![Class tableì˜ 1 more :: ê°•ì˜ì‹¤ID INT](Course%20Registration%20System%2034207f1a74b04a81adb69d5374bd76ae/DB_Schema.pnghttps://user-images.githubusercontent.com/114637188/234225614-996b2ca9-9d19-4209-8b98-c1cddfe84421.png)

Class tableì˜ 1 more :: ê°•ì˜ì‹¤ID INT

- ê°•ì˜ì‹¤(room): ê°•ì˜ì‹¤ ê°œìˆ˜ì˜ í•©ê³¼ ê±´ë¬¼ì˜ ì´ ê°•ì˜ì‹¤ ê°œìˆ˜ëŠ” ê°™ì•„ì•¼ í•¨
- ê±´ë¬¼(building): ê±´ë¬¼ì˜ ì´ ê°•ì˜ì‹¤ ê°œìˆ˜ëŠ” ê°•ì˜ì‹¤ ê°œìˆ˜ì˜ í•©ê³¼ ê°™ì•„ì•¼ í•¨
- ê³¼ëª©(course)
- ì „ê³µ(major)
- ì„±ì (credits): ì´ìˆ˜ ë…„ë„(year)ì—ëŠ” í•™ê¸°ë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠìŒ
- êµê°•ì‚¬(lecturer)
- í•™ìƒ(student): í•™ìƒì˜ ì§€ë„êµìˆ˜ëŠ” êµê°•ì‚¬ ëª©ë¡ì— ì‹¤ì œë¡œ ì¡´ì¬í•´ì•¼ í•¨
- ìˆ˜ì—…(class): ì‹ ì²­ ìˆ˜ê°• ì •ì›ì´ ê°•ì˜ì‹¤ì˜ ìˆ˜ìš© ì¸ì›ì„ ë„˜ì„ ìˆ˜ ì—†ìŒ
- ìˆ˜ì—…ì‹œê°„(time) 1900-01-0DTHH:MM:00.000Z (D: ìš”ì¼, HH: ì‹œ, MM: ë¶„)
- admin(ê´€ë¦¬ì), registerclass(ìˆ˜ê°•ì‹ ì²­ë‚´ì—­), wantclass(ìˆ˜ê°•í¬ë§ë‚´ì—­) table ì¶”ê°€

```sql
alter table student add constraint CK_studentID check(ì•„ì´ë”” not like '%admin%'); 
-- "admin"ì´ í¬í•¨ëœ ì•„ì´ë””ëŠ” ëª¨ë‘ ê´€ë¦¬ìì—ê²Œ ë¶€ì—¬í•˜ë„ë¡ ì œí•œì„ ë‘ì—ˆë‹¤.
```

```sql
alter table time drop foreign key fk_Time_Class1;
alter table time add constraint fk_Time_Class1 FOREIGN KEY (ìˆ˜ì—…ID) REFERENCES Class(ìˆ˜ì—…ID) ON DELETE CASCADE;

alter table registerclass drop foreign key fk_RegisterClass_Class1;
alter table registerclass add constraint fk_RegisterClass_Class1 FOREIGN KEY (ìˆ˜ì—…ID) REFERENCES Class(ìˆ˜ì—…ID) ON DELETE CASCADE;

alter table wantclass drop foreign key fk_WantClass_Class1;
alter table wantclass add constraint fk_WantClass_Class1 FOREIGN KEY (ìˆ˜ì—…ID) REFERENCES Class(ìˆ˜ì—…ID) ON DELETE CASCADE;
-- class ì‚­ì œ(íê°•) ì‹œ ìˆ˜ì—…ì‹œê°„ì„ ì‚­ì œí•˜ê³ , í•™ìƒë“¤ì˜ ìˆ˜ê°•ì‹ ì²­, í¬ë§ëª©ë¡ì—ì„œë„ ì‚­ì œë˜ë„ë¡ ON DELETE CASCADE ì†ì„±ì„ ì¶”ê°€í•˜ì˜€ë‹¤.
```

```sql
ALTER TABLE Time MODIFY ì‹œê°„ID INT NOT NULL AUTO_INCREMENT;
-- ì‹œê°„ ì¶”ê°€ ì‹œ primary keyê°€ ìë™ìƒì„± ë˜ë„ë¡ ìˆ˜ì •
```

### Input Data Set

[https://tableconvert.com/ko/csv-to-sql](https://tableconvert.com/ko/csv-to-sql) .csv > sql insertë¬¸ ë³€í™˜

registerclass, wantclassì—ëŠ” ë”°ë¡œ insertë¥¼ ì§„í–‰í•˜ì§€ ì•ŠìŒ.

csv ê¸°ë³¸ íŒŒì¼ì—ì„œ í•™ìƒ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€.

adminì—ëŠ” 1 tupleë§Œ insert (admin, adminpwd!!). í•„ìš”í•˜ë‹¤ë©´ ì¶”ê°€ ê°€ëŠ¥.

### ìµœì¢… db script

[SQL_ScriptInsert.txt](https://github.com/lwjmcn/course-registration-system/files/11320642/SQL_ScriptInsert.txt)

### UI ê³„íš

[UI ë””ìì¸(1).pdf]([Course%20Registration%20System%2034207f1a74b04a81adb69d5374bd76ae/UI_%25EB%2594%2594%25EC%259E%2590%25EC%259D%25B8(1).pdf](https://github.com/lwjmcn/course-registration-system/files/11320649/UI_.EB.94.94.EC.9E.90.EC.9D.B8.1.pdf))

![MainPage(pdf 1í˜ì´ì§€)](https://user-images.githubusercontent.com/114637188/234226202-77fd875d-ad97-4168-b219-6c741ea5101a.png)

MainPage(pdf 1í˜ì´ì§€)

## ì½”ë“œ ì„¤ëª…

### 1. DTO/DAO

src/main/java/ 

Classes(ìˆ˜ì—…), Student(í•™ìƒ), Admin(ê´€ë¦¬ì), Credit(ì„±ì )ë¥¼ ê°ê° packageë¡œ ë§Œë“¤ì–´ í•˜ìœ„ì— ê°ê° DTO(Student.java ë“±)ì™€ DAO(StudentDAO.java ë“±)ì„ ì‘ì„±í•¨.

DTO íŒŒì¼: í•„ìš”í•œ attributesì™€ ì¶”ê°€ members(private), getter, setter

DAO íŒŒì¼: SQL ì‹¤í–‰ë¬¸ì„ í¬í•¨í•œ í•¨ìˆ˜

### AdminDAO

- ê´€ë¦¬ì ë¡œê·¸ì¸ í™•ì¸

**`int** login(String adminID, String adminPassword)`

```sql
SELECT ê´€ë¦¬ìPW FROM ADMIN WHERE ê´€ë¦¬ìID = ?
```

### StudentDAO

- í•™ìƒ ë¡œê·¸ì¸ í™•ì¸

**`int** login(String userID, String userPassword)`

```sql
SELECT ë¹„ë°€ë²ˆí˜¸ FROM STUDENT WHERE ì•„ì´ë”” = ?
```

- í•™ìƒID(ë¡œê·¸ì¸ ì •ë³´)ë¡œ í•™ìƒ ì •ë³´ ì°¾ê¸°

`Student showMe(String userID)`

```sql
SELECT * FROM STUDENT WHERE ì•„ì´ë”” = ?
```

- í•™ìƒì˜ ì‹ ì²­ í•™ì  ìˆ˜ ê³„ì‚°

**`int** showCreditNum(String studentID)`

```sql
select sum(í•™ì ìˆ˜)
from registerclass natural join course
where í•™ìƒID=?
```

- í•™ìƒì˜ í‰ì í‰ê·  ê³„ì‚°

`Student showGrade(String studentID)`

```sql
select sum((case ì„±ì  when 'A+' then 4.5 
											when 'A0' then 4.0
											when 'B+' then 3.5
											when 'B0' then 3.0
											when 'C+' then 2.5
											when 'C0' then 2.0
											when 'D+' then 1.5
											when 'D0' then 1.0
											when 'F' then 0.0 end)*í•™ì ìˆ˜)/sum(í•™ì ìˆ˜) 
from credits natural join course
where í•™ìƒID=?
```

- ëª¨ë“  í•™ìƒ ì •ë³´ (ê´€ë¦¬ì)

`ArrayList<Student> showAll()`

```sql
SELECT * 
FROM STUDENT NATURAL JOIN MAJOR JOIN LECTURER
WHERE ì§€ë„êµìˆ˜ID=ê°•ì‚¬ID
ORDER BY ì´ë¦„
```

- í•™ìƒ ìƒíƒœ ë³€ê²½ (ê´€ë¦¬ì)

**`int** updateState(String state, String studentID)`

```sql
update student set ìƒíƒœ = ? where í•™ìƒID=?
-- ìƒíƒœ : ì¬í•™/íœ´í•™/ìí‡´
```

- íœ´í•™/ìí‡´ ì‹œ ìˆ˜ê°• ì‹ ì²­ ì¸ì›ì—ì„œ ì œì™¸ (ê´€ë¦¬ì ìƒíƒœ ë³€ê²½)

**`int** ifDrop(String studentID)`

```sql
delete from registerclass where í•™ìƒID=?
```

### CreditDAO

- í•™ìƒì˜ ê³¼ëª©ë³„ ì„±ì  ì •ë³´

`ArrayList<Credit> courseCredit(String studentID)`

```sql
select credits.ê³¼ëª©ID, ê³¼ëª©ëª…, ì„±ì , (case ì„±ì  when 'A+' then 4.5
																								when 'A0' then 4.0 
																								when 'B+' then 3.5 
																								when 'B0' then 3.0 
																								when 'C+' then 2.5 
																								when 'C0' then 2.0 
																								when 'D+' then 1.5 
																								when 'D0' then 1.0 
																								when 'F' then 0.0 end) as í•™ì  
from credits, course 
where credits.ê³¼ëª©ID=course.ê³¼ëª©ID and í•™ìƒID=?
```

### ClassesDAO

- ìˆ˜ê°•í¸ëŒ ê²€ìƒ‰ ì¡°íšŒ

`ArrayList<Classes> search(String classNum, String courseID, String courseName)`

```sql
SELECT ìˆ˜ê°•ì •ì›, ìˆ˜ì—…ë²ˆí˜¸, ê³¼ëª©ID, ê³¼ëª©ëª…, ê°•ì‚¬ëª…, ê±´ë¬¼ëª…, ê°•ì˜ì‹¤ID, ì„¤ê°•ì—°ë„, ì „ê³µëª…, í•™ë…„, í•™ì ìˆ˜, class.ìˆ˜ì—…ID 
FROM CLASS NATURAL JOIN ROOM NATURAL JOIN BUILDING NATURAL JOIN LECTURER NATURAL JOIN MAJOR 
WHERE ìˆ˜ì—…ë²ˆí˜¸ = ? or ê³¼ëª©ID = ? or ê³¼ëª©ëª… like ?
-- ê³¼ëª©ëª… %?% ì²˜ë¦¬(java)
-- ìˆ˜ì—…ë²ˆí˜¸ ì™„ì „ì¼ì¹˜, í•™ìˆ˜ë²ˆí˜¸ ì™„ì „ì¼ì¹˜, ê³¼ëª©ëª… í‚¤ì›Œë“œí¬í•¨ ê²€ìƒ‰
-- ì…‹ ì¤‘ í•˜ë‚˜ë¼ë„ ë§Œì¡± ì‹œ ëª¨ë‘ ì¶œë ¥
```

- ìˆ˜ì—… ì‹ ì²­ì¸ì› ìˆ˜

**`int** showPersonNum(String classID)`

```sql
select count(*) 
from registerclass 
where ìˆ˜ì—…ID=?
```

- ìˆ˜ê°•ì •ì› ì¡°íšŒ

**`int** showPersonMax(String classID)`

```sql
select ìˆ˜ê°•ì •ì› from class where ìˆ˜ì—…ID=?
```

- í•™ì ìˆ˜ ì¡°íšŒ

**`int** showCreditNum(String classID)`

```sql
select í•™ì ìˆ˜ from class where ìˆ˜ì—…ID=?
```

- ìˆ˜ì—… ì‹œê°„ ì¡°íšŒ

`String showTime(String classID)`

```sql
select * from time where ìˆ˜ì—…ID=?
-- java í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ìê°€ ë³´ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜
```

- OLAP í†µê³„ ì‚°ì¶œ

`ArrayList<Classes> showOLAP()`

```sql
-- í•™ìƒë³„ í‰ì í‰ê· : Î£(ê³¼ëª©í‰ì *ê³¼ëª©í•™ì ìˆ˜)/Î£(ê³¼ëª©í•™ì ìˆ˜)
with student_credit(í•™ìƒID, í‰ì í‰ê· ) as ( 
		select í•™ìƒID, sum((case ì„±ì  when 'A+' then 4.5 
																	when 'A0' then 4.0 
																	when 'B+' then 3.5 
																	when 'B0' then 3.0 
																	when 'C+' then 2.5  
																	when 'C0' then 2.0  
																	when 'D+' then 1.5  
																	when 'D0' then 1.0  
																	when 'F' then 0.0 end)*í•™ì ìˆ˜)/sum(í•™ì ìˆ˜) 
		from credits, course
		where credits.ê³¼ëª©ID=course.ê³¼ëª©ID
        group by í•™ìƒID),

-- OLAP í†µê³„ ê²°ê³¼
	course_OLAP(ê³¼ëª©ID, OLAP) as (
		select ê³¼ëª©ID, avg(student_credit.í‰ì í‰ê·  - (case ì„±ì  when 'A+' then 4.5 
																												when 'A0' then 4.0 
																												when 'B+' then 3.5 
																												when 'B0' then 3.0 
																												when 'C+' then 2.5  
																												when 'C0' then 2.0  
																												when 'D+' then 1.5  
																												when 'D0' then 1.0  
																												when 'F' then 0.0 end))
        from student_credit natural join credits
        group by ê³¼ëª©ID)

-- ê³¼ëª©ëª…ê³¼ í•¨ê»˜ TOP10 ì¶œë ¥
select ê³¼ëª©ID, ê³¼ëª©ëª…, OLAP
from course_OLAP natural join course
order by OLAP desc
limit 0,10
```

- ìˆ˜ì—… ì „ì²´ ì¡°íšŒ (ê´€ë¦¬ì)

`ArrayList<Classes> showAll()`

```sql
SELECT ìˆ˜ê°•ì •ì›, ì„¤ê°•ì—°ë„, ìˆ˜ì—…ë²ˆí˜¸, ê³¼ëª©ID, ê³¼ëª©ëª…, ê°•ì‚¬ëª…, ì „ê³µëª…, í•™ë…„, í•™ì ìˆ˜, ìˆ˜ì—…ID 
FROM CLASS NATURAL JOIN LECTURER NATURAL JOIN MAJOR 
ORDER BY ì„¤ê°•ì—°ë„ DESC, ê³¼ëª©ëª…
```

- ê°•ì˜ì‹¤ ìˆ˜ìš©ì¸ì› ì¡°íšŒ

**`int** roomPersonMax(**int** roomID)`

```sql
select ìˆ˜ìš©ì •ì› from room where ê°•ì˜ì‹¤ID=?
```

- ìˆ˜ì—… ê°œì„¤ (ê´€ë¦¬ì)

**`int** openClass(String classID, String classNum, String courseID, **int** majorID, **int** year, **int** credit, String lecturerID, **int** personMax, **int** roomID, String start1, String end1, String start2, String end2)`

```sql
SET @courseNameByJoin = (SELECT ê³¼ëª©ëª… FROM course WHERE ê³¼ëª©ID = ? LIMIT 1); 
-- ê³¼ëª©ëª… ë³€ìˆ˜ ì„¤ì •

insert into class values(?,?,?,@courseNameByJoin ,?,?,?,?,?,?,?)
-- ìˆ˜ì—… ëª©ë¡ ì¶”ê°€

insert into time(ìˆ˜ì—…ID, ëª‡êµì‹œ, ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„) values(?,?,?,?)
-- ì‹œê°„ ëª©ë¡ ì¶”ê°€

-- ì œí•œ ì¡°ê±´ì€ action.jspì—ì„œ ë‹¤ë£¬ë‹¤
```

- ìˆ˜ì—… íê°• (ê´€ë¦¬ì)

**`int** cancelClass(String classID)`

```sql
delete from class where ìˆ˜ì—…ID=?
```

- í¬ë§ ì¶”ê°€ (í•™ìƒ)

**`int** addWant(String studentID, String classID)`

```sql
insert into wantclass values(?,?)
```

- í¬ë§ ì‚­ì œ (í•™ìƒ)

**`int** deleteWant(String studentID, String classID)`

```sql
delete from wantclass where í•™ìƒID=? and ìˆ˜ì—…ID=?
```

- í¬ë§ ë‚´ì—­ ì¡°íšŒ (í•™ìƒ)

`ArrayList<Classes> showWant(String studentID)`

```sql
select ìˆ˜ê°•ì •ì›, ìˆ˜ì—…ë²ˆí˜¸, ê³¼ëª©ID, ê³¼ëª©ëª…, ê°•ì‚¬ëª…,ìˆ˜ì—…ID,ê±´ë¬¼ëª…,ê°•ì˜ì‹¤ID 
from  wantclass natural join class natural join lecturer natural join room natural join building 
where í•™ìƒID=?
```

- ìˆ˜ê°• ì‹ ì²­ (í•™ìƒ)

**`int** register(String studentID, String classID)`

```sql
insert into registerclass values(?,?)
-- ì œí•œ ì¡°ê±´ì€ action.jspì—ì„œ ë‹¤ë£¬ë‹¤
```

- ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ (í•™ìƒ)

`ArrayList<Classes> showRegister(String studentID)`

```sql
select ìˆ˜ê°•ì •ì›, ìˆ˜ì—…ë²ˆí˜¸, ê³¼ëª©ID, ê³¼ëª©ëª…, ê°•ì‚¬ëª…,ìˆ˜ì—…ID,ê±´ë¬¼ëª…,ê°•ì˜ì‹¤ID
from  registerclass natural join class natural join lecturer natural join room natural join building
where í•™ìƒID=?";
```

- ìˆ˜ê°• ì·¨ì†Œ (í•™ìƒ)

**`int** deleteRegister(String studentID, String classID)`

```sql
delete from registerclass 
where í•™ìƒID=? and ìˆ˜ì—…ID=?
```

- ìˆ˜ì—… ì‹œê°„í‘œ ìƒì„±

`String[][] makeTable(String studentID)`

```sql
select ê³¼ëª©ID,ê³¼ëª©ëª…,ì‹œì‘ì‹œê°„,ì¢…ë£Œì‹œê°„
from registerclass natural join class natural join time
where í•™ìƒID=?
-- ì‹œê°„ ì¡°íšŒ í›„
-- í•¨ìˆ˜ì—ì„œ 2ì°¨ì› ë°°ì—´ ìƒì„±
```

- ìˆ˜ê°• ì •ì› ë³€ê²½ (ê´€ë¦¬ì)

**`int** updatePersonMax(String personMax, String classID)`

```sql
update class set ìˆ˜ê°•ì •ì›=? 
where ìˆ˜ì—…ID=?
```

- ìˆ˜ê°• í—ˆìš© (ê´€ë¦¬ì)

**`int** allowRegister(String studentID, String classID)`

```sql
update class set ìˆ˜ê°•ì •ì›=ìˆ˜ê°•ì •ì›+1 where ìˆ˜ì—…ID=?
-- ìˆ˜ê°•ì •ì› 1 ì¦ê°€
insert into registerclass values(?, ?)
-- í•™ìƒì˜ ìˆ˜ê°•ì‹ ì²­ ëª©ë¡ì— ìˆ˜ì—… ì¶”ê°€
```

- ì¬ìˆ˜ê°• ì—¬ë¶€ í‘œì‹œ

`String ifRetake(String studentID,String courseID)`

```sql
select EXISTS 
		( select * 
			from credits 
			where í•™ìƒID=? and ê³¼ëª©ID=? 
			limit 1 )
```

- ì¬ìˆ˜ê°• ì´ì „ ì„±ì 

`String showRetakeCredit(String studentID, String classID)`

```sql
select ì„±ì  
from credits natural join class 
where í•™ìƒID = ? and ìˆ˜ì—…ID = ?
```

- ì‹ ì²­ ë‚´ì—­ì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ê°€ (>ì‹ ì²­ ë²„íŠ¼ ë¹„í™œì„±í™”)

**`boolean** ifRegistered(String studentID,String classID)`

```sql
select EXISTS 
		( select ìˆ˜ì—…ID
			from registerclass
			where í•™ìƒID= ? and ìˆ˜ì—…ID=?
			limit 1 )
```

- í¬ë§ ë‚´ì—­ì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ê°€ (>í¬ë§ ì¶”ê°€ ë²„íŠ¼ ë¹„í™œì„±í™”)

**`boolean** ifWanted(String studentID,String classID)`

```sql
select EXISTS
		( select * 
			from wantclass 
			where í•™ìƒID=? and ìˆ˜ì—…ID=? 
			limit 1 )
```

### 2. JSP (ViewPage/ActionPage)

<aside>
ğŸ’¡ ìì„¸í•œ ë‚´ìš©ì€ ì½”ë“œ ì£¼ì„ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

</aside>

src/main/java/webapp/WEB_INF/

Action.jsp : ë°±ì—”ë“œ ì²˜ë¦¬.

ê·¸ ì™¸ : html/css/jspë¡œ í”„ë¡ íŠ¸ì—”ë“œ(ì¼ë¶€ ê°„ë‹¨í•œ ë°±ì—”ë“œ í¬í•¨) ì²˜ë¦¬.

ëª¨ë“  í˜ì´ì§€ì˜ í•˜ë‹¨ì— copyright ì¶”ê°€.

### ë¡œê·¸ì¸ í˜ì´ì§€

- login.jsp: ë¡œê·¸ì¸ í™”ë©´ êµ¬ì„±
    - loginAction.jsp: ë¡œê·¸ì¸ í™”ë©´ì—ì„œ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ê²°ê³¼ë¥¼ alert
- logoutAction.jsp: ë¡œê·¸ì¸ ì´í›„ í™”ë©´ì—ì„œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ session invalidate

### í•™ìƒ í˜ì´ì§€

í—¤ë”ì˜ ë¡œê³ ë¥¼ í´ë¦­ ì‹œ ë©”ì¸í™”ë©´ìœ¼ë¡œ ì´ë™

í—¤ë” ë°”ë¡œ ì•„ë˜ì˜ ë©”ë‰´ì—ì„œ 5ê°œì˜ í™”ë©´ì„ ì˜¤ê°ˆ ìˆ˜ ìˆë‹¤.

í—¤ë” ì˜¤ë¥¸ìª½ ì•„ë˜ì—ì„œ í•™ìƒì˜ ì‹ ì²­í•™ì /ìµœëŒ€í•™ì ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

- main.jsp: ë¡œê·¸ì¸ ì•ˆ ë˜ì–´ ìˆì„ ì‹œì˜ ë©”ì¸í™”ë©´ì´ì, í•™ìƒ ë¡œê·¸ì¸ ì´í›„ ë©”ì¸í™”ë©´. ìˆ˜ê°•í¸ëŒíƒ­. 2022ë…„ ìˆ˜ì—…ë§Œ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.
- Register.jsp: ìˆ˜ê°•ì‹ ì²­ íƒ­. ìˆ˜ê°•í¸ëŒê³¼ ê°™ì´ ê²€ìƒ‰ ê°€ëŠ¥. ì´ë¯¸ ì‹ ì²­/í¬ë§ë˜ì–´ìˆë‹¤ë©´ ë²„íŠ¼ì´ ëœ¨ì§€ ì•ŠìŒ.
    - RegisterAction.jsp: ìˆ˜ê°• ì‹ ì²­ ë²„íŠ¼ í´ë¦­ ì‹œ, ì œí•œ ì¡°ê±´ì„ í™•ì¸ í›„ ì²˜ë¦¬.
    - AddWantAction.jsp: í¬ë§ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ
- showWant.jsp: í¬ë§ ë‚´ì—­ì„ ë³´ì—¬ì¤Œ. ìˆ˜ê°• ì‹ ì²­ ê°€ëŠ¥.
    - RegisterAction.jsp: ìˆ˜ê°• ì‹ ì²­ ë²„íŠ¼ í´ë¦­ ì‹œ, ì œí•œ ì¡°ê±´ì„ í™•ì¸ í›„ ì²˜ë¦¬.
    - DeleteWantAction.jsp: í¬ë§ ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ
- showRegister.jsp: ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ì„ ë³´ì—¬ì¤Œ.
    - DeleteRegisterAction.jsp: ìˆ˜ê°• ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ
- showTimetable.jsp: ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ì„ ë°”íƒ•ìœ¼ë¡œ ìˆ˜ì—…ì‹œê°„í‘œë¥¼ ìƒì„± í›„ ì¡°íšŒ.

### ê´€ë¦¬ì í˜ì´ì§€

í—¤ë”ì˜ ë¡œê³ ë¥¼ í´ë¦­í•˜ë©´ ê´€ë¦¬ìì˜ ë©”ì¸í™”ë©´ìœ¼ë¡œ ê°„ë‹¤.

í—¤ë” ë°”ë¡œ ì•„ë˜ì˜ ë©”ë‰´ì—ì„œ 5ê°œì˜ í™”ë©´ì„ ì˜¤ê°ˆ ìˆ˜ ìˆë‹¤.

- AdminMain.jsp: ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸ ì‹œ ë©”ì¸í™”ë©´. ìˆ˜ê°•í¸ëŒ íƒ­.
- AdminStudent.jsp : í•™ìƒì •ë³´ íƒ­. í•™ìƒ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìœ¼ë©°, ì§€ë„êµìˆ˜ID/ì´ë¦„ì„ ëª¨ë‘ í‘œì‹œí•¨.
    - AdminUpdateStudent.jsp : ìƒíƒœ ë³€ê²½ ë²„íŠ¼ í´ë¦­ ì‹œì˜ í™”ë©´. ì¬í•™/íœ´í•™/ìí‡´ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ.
        - UdpateStateAction.jsp : ë³€ê²½ ë²„íŠ¼ í´ë¦­ ì‹œ ì•¡ì…˜.
    - AdminShowCredit.jsp : ì„±ì  ì¡°íšŒ ë²„íŠ¼ í´ë¦­ ì‹œ í™”ë©´. í‰ì í‰ê· ê³¼ ê³¼ëª©ë³„ í•™ì  ì¡°íšŒ.
    - AdminShowTimetable.jsp : ê¸ˆí•™ê¸° ì‹œê°„í‘œ ì¡°íšŒ ë²„íŠ¼ í´ë¦­ ì‹œ í™”ë©´. í•™ìƒì˜ ì‹ ì²­ë‚´ì—­ì— ë”°ë¥¸ ì‹œê°„í‘œë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- AdminClasses.jsp : ê³¼ëª©ì •ë³´ íƒ­. ìˆ˜ì—… ì •ë³´ë¥¼ ëª¨ë‘ ë³¼ ìˆ˜ ìˆë‹¤. 2022ë…„ì— ì„¤ê°•ëœ ìˆ˜ì—…ì´ ë¨¼ì € í‘œì‹œëœë‹¤. ì•„ë˜ ì•¡ì…˜ë“¤ì€ 2022ë…„ ìˆ˜ì—…ì—ë§Œ ì ìš© ê°€ëŠ¥í•˜ë‹¤.
    - AdminUpdatePersonMax.jsp : ì¦ì› ë²„íŠ¼ í´ë¦­ ì‹œ í™”ë©´. ìˆ˜ê°•ì •ì› ë³€ê²½.
        - UpdatePersonMaxAction.jsp : ì¦ì› ë²„íŠ¼ í´ë¦­ ì‹œ ì•¡ì…˜.
    - AdminAllowRegister.jsp : ìˆ˜ê°• í—ˆìš© ë²„íŠ¼ í´ë¦­ ì‹œ í™”ë©´. í•™ìƒ í•™ë²ˆ ì…ë ¥.
        - AllowRegisterAction.jsp : í—ˆìš© ë²„íŠ¼ í´ë¦­ ì‹œ ì•¡ì…˜.
    - CancelClassAction.jsp : ìˆ˜ì—… íê°• ë²„íŠ¼ í´ë¦­ ì‹œ ì•¡ì…˜.
- AdminOpenClass.jsp : ìˆ˜ì—…ì„¤ê°• íƒ­. ìˆ˜ì—… ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì„¤ê°•í•  ìˆ˜ ìˆë‹¤.
    - OpenClassAction.jsp : ì„¤ê°• ë²„íŠ¼ í´ë¦­ ì‹œ ì•¡ì…˜. ì œí•œì¡°ê±´ì„ í™•ì¸í•œ í›„ ìˆ˜ì—…ì„ ì¶”ê°€í•œë‹¤.
- AdminOLAP.jsp : ëª…ì„¸ì— ë”°ë¥¸ OLAP ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€.
    - ê³¼ëª©ë³„ì´ ì•„ë‹Œ (ê³¼ëª©,êµìˆ˜)ë³„ë¡œ ë¶„ë¦¬í•˜ë ¤ê³  í–ˆìœ¼ë‚˜, ì£¼ì–´ì§„ data setì—ì„œ ì„±ì ì— ëŒ€í•œ ì •ë³´ê°€ ìˆ˜ì—… ë‹¨ìœ„ê°€ ì•„ë‹Œ ê³¼ëª© ë‹¨ìœ„ì˜€ê¸° ë•Œë¬¸ì— data setë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê³¼ëª©ë³„ë¡œ ì²˜ë¦¬í•¨.

### 3. DB Password íŒŒì¼ ë¶„ë¦¬

reference : [https://hianna.tistory.com/622](https://hianna.tistory.com/622)  

json-simple-1.1.1.jar í”„ë¡œì íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¶”ê°€

src/secrets.json ìƒì„± : DBPassWord ì €ì¥

proj1/.gitignore ìƒì„± : git ì—…ë¡œë“œ ì‹œ secrets.json ì œì™¸

DAO.java : secrets.jsonì—ì„œ filereaderì™€ jsonparserë¥¼ í†µí•´ DBPassWordë¥¼ í†µí•´ ë¶ˆëŸ¬ì˜´

<aside>
ğŸ’¡ ë‹¤ë§Œ parsing ê³¼ì •ì—ì„œ ê°„í—ì ìœ¼ë¡œ ì˜¤ë¥˜ ë°œìƒ > ì£¼ì„ ì²˜ë¦¬

</aside>

## ì‹¤í–‰

### ë¹Œë“œ ë° ì‹¤í–‰ ë°©ë²•

<aside>
ğŸ’¡ ëª…ì„¸ì™€ ê°™ì€ í™˜ê²½ì—ì„œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

</aside>

+MySQL scriptë¬¸ì„ í†µí•´ create table, insert data sets í•„ìš”

+UTF-8 encoding, decoding ì„¤ì • í•„ìš”

### ì‹¤í–‰ ê²°ê³¼

- ìˆ˜ê°• í¸ëŒ ê²€ìƒ‰ 0:00
- ê´€ë¦¬ì ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ 0:37  / 3:26
- ê´€ë¦¬ì ìˆ˜ê°• ê°œì„¤ ë° ì‚­ì œ ê°€ëŠ¥ 1:21
- ê´€ë¦¬ì í•™ìƒ/ê³¼ëª© ìƒíƒœ ì¡°íšŒ ë° ë³€ê²½ 0:50 / 2:53
- ê´€ë¦¬ì í†µê³„ ê¸°ëŠ¥ (OLAP) 3:21
- ì‚¬ìš©ì ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ 3:27 / 4:57
- ì‚¬ìš©ì ìˆ˜ê°• ì‹ ì²­ ë° ì·¨ì†Œ ê°€ëŠ¥ 3:49
- ì‚¬ìš©ì ìˆ˜ì—… ì‹œê°„í‘œ ìƒì„± ê°€ëŠ¥ 4:30
- GUI
- ìš”êµ¬ì‚¬í•­ ì™¸ ì¶”ê°€ ê¸°ëŠ¥

[https://youtu.be/__p-3GG7yqc](https://youtu.be/__p-3GG7yqc)

## Trouble Shooting

1. DBë¥¼ ìƒˆë¡œ ìƒì„±í•œ í›„ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ë°œìƒí•˜ë©°, ë¡œê·¸ì¸ì´ ì‹¤íŒ¨í–ˆë‹¤.

```sql
Loading class com.mysql.jdbc.Driver'. This is deprecated. The new driver class is com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
```

í•´ê²°: ì—ëŸ¬ ë©”ì‹œì§€ì— ë”°ë¼ UserDAO.java íŒŒì¼ì—ì„œ `Class.*forName*`ì„ `com.mysql.cj.jdbc.Driver`ë¡œ ìˆ˜ì •í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¨.

JDBC DriverManager Interfaceê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ì„œ ê²½ë¡œê°€ ë°”ë€Œì—ˆë‹¤ê³  í•˜ëŠ”ë° ì •í™•í•œ ì´ìœ ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤. json-simple-1.1.1.jar ì„¤ì¹˜ ì´í›„ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì¶”ì •ë¨.

1. ReadJSONFile ì‹¤íŒ¨, â€œ../../../secrets.jsonâ€ ê²½ë¡œì—ì„œ FileNotFoundException, í•´ê²°X
2. ìˆ˜ê°•í¸ëŒì—ì„œ êµê³¼ëª©ëª…ì„ ê²€ìƒ‰í•˜ë©´ ê²°ê³¼ì— ì•„ë¬´ê²ƒë„ ëœ¨ì§€ ì•ŠìŒ 
    
    í•´ê²°: í•œê¸€ ê¹¨ì§. ì…ë ¥ì„ ë°›ëŠ” jspíŒŒì¼ë“¤ì˜ í—¤ë”ì— intelliJ default encoding ê°’ì„ UTF-8ë¡œ ë³€ê²½í•˜ê³  í•´ë‹¹ íŒŒì¼ì˜ ì½”ë“œ ìƒë‹¨ì— `<%request.setCharacterEncoding("UTF-8"); %>`ë¥¼ ì ì–´ì¤Œ.
    
3. ê³¼ëª© ì„¤ê°• ì‹œ ê³¼ëª©ëª…ì— í•œê¸€ì„ ì…ë ¥í•˜ë©´ ê¹¨ì ¸ì„œ ì¶œë ¥ë¨
    
    ì‹œë„(1): `<% request.setCharacterEncoding("UTF-8");%>`(ì‹¤íŒ¨)
    
    ì‹œë„(2): charsetì„ â€œeuc-krâ€ë¡œ ë³€ê²½(ì‹¤íŒ¨)
    
    ì‹œë„(3): [https://blog.okno.co.kr/11](https://blog.okno.co.kr/11) `str = new String(str.getBytes("8859_1"),"KSC5601");`(ì‹¤íŒ¨)
    
    í•´ê²°: ê³¼ëª©ëª…ì€ í•™ìˆ˜ë²ˆí˜¸ì— ì˜í•´ ê²°ì •ë˜ë¯€ë¡œ SQL ë³€ìˆ˜ ì§€ì •ì„ í†µí•´ ì…ë ¥ì„ ë°›ëŠ” ëŒ€ì‹  ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•¨.
    
4. ë¶€íŠ¸ìŠ¤íŠ¸ë©ì—ì„œ Modal ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ë¶ˆëŸ¬ì™”ëŠ”ë°ë„ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ Modal ì°½ì´ ëœ¨ì§€ ì•ŠìŒ. ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‚¬ì´íŠ¸ì—ì„œëŠ” ì •ìƒ ë™ì‘í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ ë¸Œë¼ìš°ì € ë²„ì „ì˜ ë¬¸ì œëŠ” ì•„ë‹˜. í•´ê²°X
5. ì‹¤í–‰ ì‹œ HTTP 404 ì˜¤ë¥˜. Origin ì„œë²„ê°€ ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ìœ„í•œ í˜„ì¬ì˜ representationì„ ì°¾ì§€ ëª»í–ˆê±°ë‚˜, ê·¸ê²ƒì´ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ë°íˆë ¤ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    
    í•´ê²°: index.jspëŠ” íŒŒì¼ëª…ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ìŒ. index.jsp ë³µêµ¬.
    
6. ì´ ì™¸ì˜ ì˜¤ë¥˜ëŠ” ëª¨ë‘ êµ¬ë¬¸ ì‹¤ìˆ˜(ì†Œê´„í˜¸, ì¤‘ê´„í˜¸, capitalizing, â€˜==â€™ë¡œ String ë¹„êµ ì‹œë„ ë“±)

## Need to Improve

- UI ê³„íšê³¼ í”„ë¡œê·¸ë˜ë° ê³„íšì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì§  ë’¤ ì‹œì‘í•˜ì
- íŒŒì¼ëª…, í•¨ìˆ˜ëª…, í•¨ìˆ˜ì˜ ìˆœì„œ, SQLë¬¸ ë“±ì˜ í†µì¼ì„± ë¶€ì¡±
- MySQLì—ì„œ ë‹¤ì´ì–´ê·¸ë¨ì„ ë°”ë¡œ í…Œì´ë¸”ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.
    
    ë‹¤ì´ì–´ê·¸ë¨ì€ ë³´ê¸° í¸í•œ ìš©ë„ë¼ê³  ìƒê°í•´ì„œ í•œê¸€ë¡œ ë§Œë“¤ì—ˆëŠ”ë°, ì‹œê°„ì´ ë¶€ì¡±í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ attributeëª…ë“¤ì„ ì „ë¶€ í•œê¸€ë¡œ ë§Œë“¤ê²Œ ëœ ì ì´ ì•„ì‰¬ì›€
    
- time ê°’ì„ 1900-01-0D0HH:MM:0.000Zê°€ ì•„ë‹Œ ìš”ì¼/ì‹œ/ë¶„ìœ¼ë¡œ attributeë¥¼ ë‚˜ëˆ´ë‹¤ë©´ ë” í¸í•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì—ˆì„ ê²ƒ
- page.jspì™€ action.jspì˜ í´ë”ë¥¼ êµ¬ë¶„í•˜ë©´ ë³´ê¸° í¸í–ˆì„ ê²ƒ
